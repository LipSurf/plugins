import PluginBase from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/plugin-base.js';import ExtensionUtil from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/extension-util.js';const SpotifyPlayerUrlRegexMatch=/.*\.spotify\.com/;function clickButton(selector){const btn=document.querySelector(selector);btn&&btn.click();}async function findSpotifyPlayerTabAsync(){return new Promise(res=>chrome.tabs.query({url:"*://*.spotify.com/*"},tabs=>{res(tabs.length?tabs[0]:null);}))}async function sendSpotifyControlMessage(control,_tab=null){const tab=_tab||await findSpotifyPlayerTabAsync();return new Promise(resolve=>{if(tab&&tab.id)return chrome.tabs.sendMessage(tab.id,{type:"postMessage",control:control},()=>{resolve(!0);});resolve(!1);})}var Spotify={...PluginBase,niceName:"Spotify",languages:{},description:"An experimental plugin for spotify.com",match:SpotifyPlayerUrlRegexMatch,version:"0.0.9",authors:"Ahmed Kamal",init:function(){SpotifyPlayerUrlRegexMatch.test(window.location.origin)&&chrome.runtime.onMessage.addListener((msg,_,sendResponse)=>{if("postMessage"===msg.type){switch(msg.control){case'button[data-testid="control-button-play"]':clickButton('button[data-testid="control-button-play"]');break;case'button[data-testid="control-button-pause"]':clickButton('button[data-testid="control-button-pause"]');break;case'button[data-testid="control-button-skip-forward"]':clickButton('button[data-testid="control-button-skip-forward"]');break;case'button[data-testid="control-button-skip-back"]':clickButton('button[data-testid="control-button-skip-back"]');}sendResponse(null);}});},commands:[{name:"spotify play",description:"Play the Spotify web player.",global:!0,match:"spotify play",fn:async function(){let tab=await findSpotifyPlayerTabAsync();if(!tab){"yes"===prompt("Spotify player seems to be closed, do you want me to open it?","yes")&&(tab=await async function(){return new Promise(res=>chrome.tabs.create({url:"https://play.spotify.com/"},tab=>res(tab)))}());}await sendSpotifyControlMessage('button[data-testid="control-button-play"]',tab);}},{name:"spotify pause",description:"Pause the Spotify web player.",global:!0,match:"spotify pause",fn:async function(){await sendSpotifyControlMessage('button[data-testid="control-button-pause"]');}},{name:"spotify next",description:"Moves to the next song on the Spotify web player.",global:!0,match:"spotify next",fn:async function(){await sendSpotifyControlMessage('button[data-testid="control-button-skip-forward"]');}},{name:"spotify previous",description:"Moves to the previous song on the Spotify web player.",global:!0,match:"spotify previous",fn:async function(){await sendSpotifyControlMessage('button[data-testid="control-button-skip-back"]');}}]};

export default Spotify;LS-SPLITallPlugins.Spotify = (() => { const SpotifyPlayerUrlRegexMatch=/.*\.spotify\.com/;function clickButton(selector){const btn=document.querySelector(selector);btn&&btn.click();}var Spotify={...PluginBase,init:function(){SpotifyPlayerUrlRegexMatch.test(window.location.origin)&&chrome.runtime.onMessage.addListener((msg,_,sendResponse)=>{if("postMessage"===msg.type){switch(msg.control){case'button[data-testid="control-button-play"]':clickButton('button[data-testid="control-button-play"]');break;case'button[data-testid="control-button-pause"]':clickButton('button[data-testid="control-button-pause"]');break;case'button[data-testid="control-button-skip-forward"]':clickButton('button[data-testid="control-button-skip-forward"]');break;case'button[data-testid="control-button-skip-back"]':clickButton('button[data-testid="control-button-skip-back"]');}sendResponse(null);}});},commands:{"spotify play":{},"spotify pause":{},"spotify next":{},"spotify previous":{}}};

return Spotify;
 })()LS-SPLITallPlugins.Spotify = (() => { const SpotifyPlayerUrlRegexMatch=/.*\.spotify\.com/;function clickButton(selector){const btn=document.querySelector(selector);btn&&btn.click();}var Spotify={...PluginBase,init:function(){SpotifyPlayerUrlRegexMatch.test(window.location.origin)&&chrome.runtime.onMessage.addListener((msg,_,sendResponse)=>{if("postMessage"===msg.type){switch(msg.control){case'button[data-testid="control-button-play"]':clickButton('button[data-testid="control-button-play"]');break;case'button[data-testid="control-button-pause"]':clickButton('button[data-testid="control-button-pause"]');break;case'button[data-testid="control-button-skip-forward"]':clickButton('button[data-testid="control-button-skip-forward"]');break;case'button[data-testid="control-button-skip-back"]':clickButton('button[data-testid="control-button-skip-back"]');}sendResponse(null);}});},commands:{"spotify play":{},"spotify pause":{},"spotify next":{},"spotify previous":{}}};

return Spotify;
 })()