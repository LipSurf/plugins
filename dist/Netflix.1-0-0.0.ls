import PluginBase from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/plugin-base.js';import ExtensionUtil from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/extension-util.js';const TO_PAGE_PROOF_KEY=PluginBase.util.getNoCollisionUniqueAttr(),FROM_PAGE_PROOF_KEY=PluginBase.util.getNoCollisionUniqueAttr(),sendMessage=payload=>window.postMessage(JSON.stringify({proofKey:TO_PAGE_PROOF_KEY,payload:payload})),consumeMessageStringAsCommand=(messageStr,proofKey,callback)=>{const message=(maybeJSONString=>{try{return JSON.parse(maybeJSONString)}catch(_a){return null}})(messageStr);message&&message.proofKey===proofKey&&callback(message.payload);},navigateToSearch=title=>{window.location.href=`https://www.netflix.com/search?q=${encodeURIComponent(title)}`;},navigateToWatch=videoId=>{window.location.href=`https://www.netflix.com/watch/${videoId}`;};var NetflixPluginContextEnum;!function(NetflixPluginContextEnum){NetflixPluginContextEnum.watch="Netflix Video Player Controls",NetflixPluginContextEnum.browse="Browse Netflix";}(NetflixPluginContextEnum||(NetflixPluginContextEnum={}));const contextManager=(()=>{let enabled=!0;const refreshCurrentContext=()=>{try{(context=>{const currentContextSet=new Set(PluginBase.util.getContext());switch(currentContextSet.delete(PluginBase.constants.contexts.Normal),currentContextSet.delete(NetflixPluginContextEnum.watch),currentContextSet.delete(NetflixPluginContextEnum.browse),!0){case context===NetflixPluginContextEnum.browse:return void PluginBase.util.enterContext([NetflixPluginContextEnum.browse,PluginBase.constants.contexts.Normal,...Array.from(currentContextSet)]);case context===NetflixPluginContextEnum.watch:return void PluginBase.util.enterContext([NetflixPluginContextEnum.watch,...Array.from(currentContextSet)]);default:PluginBase.util.removeContext(NetflixPluginContextEnum.watch),PluginBase.util.removeContext(NetflixPluginContextEnum.browse),PluginBase.util.addContext(PluginBase.constants.contexts.Normal);}})((url=>{const{pathname:pathname}=url;switch(!0){case pathname.startsWith("/watch"):return NetflixPluginContextEnum.watch;case pathname.startsWith("/latest"):case pathname.startsWith("/browse"):case pathname.startsWith("/title"):case pathname.startsWith("/search"):return NetflixPluginContextEnum.browse;default:return null}})(new URL(window.location.href)));}catch(error){console.error(error);}};return {enable:async()=>{for(enabled=!0;enabled;)refreshCurrentContext(),await new Promise(resolve=>setTimeout(resolve,1e3));},disable:()=>{enabled=!1,PluginBase.util.enterContext([PluginBase.constants.contexts.Normal]);}}})();var Netflix={...PluginBase,niceName:"Netflix",languages:{},description:"A Netflix plugin to assist audience in operating the video player and navigating through netflix web application",match:/.*\.netflix.com/,version:"1.0.0",init:()=>contextManager.enable(),destroy:()=>contextManager.disable(),homophones:{search:"search"},contexts:{[NetflixPluginContextEnum.watch]:{commands:["Pause Video","Play Video","Volume Up","Volume Down","Volume Full","Volume Zero","Volume Half","Volume Set In Percentage","Change Audio","Change Subtitle","Seek To By Minute and Second","Seek To By Second","Seek Ahead By Second","Seek Ahead By Second","Seek Behind By Second","Seek Behind By Second"]},[NetflixPluginContextEnum.browse]:{commands:["Watch By Title","Watch Random Show","Search Show"]}},commands:[{name:"Override::Netflix",match:"netflix",pageFn:()=>{}},{name:"Pause Video",match:["pause","stop"],pageFn:()=>sendMessage({key:"pause"}),normal:!1},{name:"Play Video",match:"play",pageFn:()=>sendMessage({key:"play"}),normal:!1},{name:"Volume Up",match:"[volume/sound level] up",pageFn:()=>sendMessage({key:"volume",sub:{key:"up"}}),normal:!1},{name:"Volume Down",match:"[volume/sound level] down",pageFn:()=>sendMessage({key:"volume",sub:{key:"down"}}),normal:!1},{name:"Volume Full",match:"[volume/sound level] full",pageFn:()=>sendMessage({key:"volume",sub:{key:"full"}}),normal:!1},{name:"Volume Zero",match:"[volume/sound level] zero",pageFn:()=>sendMessage({key:"volume",sub:{key:"zero"}}),normal:!1},{name:"Volume Half",match:"[volume/sound level] half",pageFn:()=>sendMessage({key:"volume",sub:{key:"half"}}),normal:!1},{name:"Volume Set In Percentage",match:"set [volume/sound level] to # percent",pageFn:(_,volumePercentage)=>sendMessage({key:"volume",sub:{key:"setPercent",percentage:volumePercentage/100}}),normal:!1},{name:"Change Audio",match:["[/change/switch] audio to *"],pageFn:(_,audioName)=>!!audioName&&sendMessage({key:"changeAudio",sub:{key:"ask",query:audioName}}),normal:!1},{name:"Change Subtitle",match:["[/change/switch] [text/subtitle] to *"],pageFn:(_,textName)=>!!textName&&sendMessage({key:"changeText",sub:{key:"ask",query:textName}}),normal:!1},{name:"Seek To By Minute and Second",match:["skip to minute #","skip to minute # second #"],pageFn:(_,minute,second=0)=>sendMessage({key:"skip",sub:{key:"to",timestamp:1e3*(60*minute+second)}}),normal:!1},{name:"Seek To By Second",match:["skip to second #"],pageFn:(_,second)=>sendMessage({key:"skip",sub:{key:"to",timestamp:1e3*second}}),normal:!1},{name:"Seek Ahead By Second",match:["skip ahead # [minute/minutes]","skip ahead # [minute/minutes] # [second/seconds]"],pageFn:(_,minute,second=0)=>sendMessage({key:"skip",sub:{key:"ahead",duration:1e3*(60*minute+second)}}),normal:!1},{name:"Seek Ahead By Second",match:["skip ahead # [second/seconds]"],pageFn:(_,second)=>sendMessage({key:"skip",sub:{key:"ahead",duration:1e3*second}}),normal:!1},{name:"Seek Behind By Second",match:["skip behind # [minute/minutes]","skip behind # [minute/minutes] # [second/seconds]"],pageFn:(_,minute,second=0)=>sendMessage({key:"skip",sub:{key:"behind",duration:1e3*(60*minute+second)}}),normal:!1},{name:"Seek Behind By Second",match:["skip behind # [second/seconds]"],pageFn:(_,second)=>sendMessage({key:"skip",sub:{key:"behind",duration:1e3*second}}),normal:!1},{name:"Watch By Title",match:["[watch/play] *"],pageFn:(_,query)=>sendMessage({key:"watch",sub:{key:"ask-videos",query:query}}),normal:!1},{name:"Watch Random Show",match:["random"],pageFn:_=>sendMessage({key:"watchRandom"}),normal:!1},{name:"Search Show",match:["search *"],pageFn:(_,title)=>navigateToSearch(title),normal:!1}]};(()=>{window.addEventListener("message",ev=>receiveMessage(ev.data));const receiveMessage=messageStr=>consumeMessageStringAsCommand(messageStr,FROM_PAGE_PROOF_KEY,command=>{switch(command.key){case"changeText":return handleChangeTextAnswer(command);case"changeAudio":return handleChangeAudioAnswer(command);case"watch":return handleWatchAnswer(command)}});})();const handleWatchAnswer=async command=>{const{sub:sub}=command;if("answer-matches"!==sub.key)return;const videos=sub.videos,exactVideo=videos.find(video=>video.title===sub.query);if(exactVideo)return navigateToWatch(exactVideo.videoId);const filteredVideos=videos.filter(video=>!!video.title.trim()),highScore=(await Promise.all(filteredVideos.map(video=>PluginBase.util.fuzzyHighScore(sub.query,[video.title],0,!0)))).map(([_,score],index)=>({score:score,index:index})).sort(({score:scoreA},{score:scoreB})=>scoreB-scoreA)[0];if(highScore.score>.8){const fuzzyVideo=filteredVideos[highScore.index];if(fuzzyVideo)return navigateToWatch(fuzzyVideo.videoId)}return navigateToSearch(sub.query)},handleChangeTextAnswer=async command=>{const{sub:sub}=command;if("answer"!==sub.key)return;const tracks=sub.texts,[index]=await PluginBase.util.fuzzyHighScore(sub.query,tracks.map(track=>track.displayName),void 0,!0),track=tracks[index];track&&sendMessage({key:"changeText",sub:{key:"to",trackId:track.trackId}});},handleChangeAudioAnswer=async command=>{const{sub:sub}=command;if("answer"!==sub.key)return;const tracks=sub.audios,[index]=await PluginBase.util.fuzzyHighScore(sub.query,tracks.map(track=>track.displayName),void 0,!0),track=tracks[index];track&&sendMessage({key:"changeAudio",sub:{key:"to",trackId:track.trackId}});},injectables=(toPageProofKey,fromPageProofKey)=>{const consumeMessageStringAsCommand=(messageStr,proofKey,callback)=>{const message=(maybeJSONString=>{try{return JSON.parse(maybeJSONString)}catch(_a){return null}})(messageStr);message&&message.proofKey===proofKey&&callback(message.payload);},sendMessage=payload=>window.postMessage(JSON.stringify({proofKey:fromPageProofKey,payload:payload})),handleChangeText=command=>{const{sub:sub}=command;switch(sub.key){case"ask":return withCurrentPlayer(player=>sendMessage({key:"changeText",sub:{key:"answer",texts:player.getTextTrackList(),query:sub.query}}));case"to":return withCurrentPlayer(player=>{const track=player.getTextTrackList().find(track=>track.trackId===sub.trackId);track&&player.setTextTrack(track);})}},handleChangeAudio=command=>{const{sub:sub}=command;switch(sub.key){case"ask":return withCurrentPlayer(player=>sendMessage({key:"changeAudio",sub:{key:"answer",audios:player.getAudioTrackList(),query:sub.query}}));case"to":return withCurrentPlayer(player=>{const track=player.getAudioTrackList().find(track=>track.trackId===sub.trackId);track&&player.setAudioTrack(track);})}},handleVolumeCommand=command=>withCurrentPlayer(player=>{switch(command.sub.key){case"up":return player.setVolume(Math.min(player.getVolume()+.1,1));case"down":return player.setVolume(Math.max(player.getVolume()-.1,0));case"full":return player.setVolume(1);case"zero":return player.setVolume(0);case"half":return player.setVolume(.5);case"setPercent":return player.setVolume(command.sub.percentage)}}),handleSeekCommand=command=>withCurrentPlayer(player=>{switch(command.sub.key){case"to":return player.seek(command.sub.timestamp);case"ahead":return player.seek(player.getCurrentTime()+command.sub.duration);case"behind":return player.seek(player.getCurrentTime()-command.sub.duration)}}),handleWatch=command=>{switch(command.sub.key){case"ask-videos":return sendMessage({key:"watch",sub:{key:"answer-matches",query:command.sub.query,videos:[...getInPageVideos(),...getInCacheVideo()].map(({videoId:videoId,title:title})=>({videoId:videoId,title:title}))}})}},getInCacheVideo=()=>withCache(cache=>{const videos=cache.videos;return videos?Object.entries(videos).map(([videoId,video])=>({videoId:videoId,title:video.title&&video.title.value||"",data:video})).filter(video=>""!==video.title):null})||[],getInPageVideos=()=>Array.from(document.querySelectorAll("a")).map(anchorElement=>{if(!anchorElement.href)return null;const url=new URL(anchorElement.href,window.location.origin);if(url.pathname.startsWith("/watch/")){const ariaLabel=anchorElement.getAttribute("aria-label")||"";return {anchorElement:anchorElement,title:ariaLabel,videoId:url.pathname.slice("/watch/".length)}}return null}).filter(result=>null!==result),handleWatchRandom=()=>{const videoIds=Array.from(new Set([...getInCacheVideo().map(({videoId:videoId})=>videoId),...getInPageVideos().map(({videoId:videoId})=>videoId)])),videoId=videoIds[Math.round(Math.random()*(videoIds.length-1))];videoId&&(videoId=>{window.location.href=`https://www.netflix.com/watch/${videoId}`;})(videoId);},withCurrentPlayer=fn=>{const currentPlayer=getCurrentPlayer();if(currentPlayer)return fn(currentPlayer)},getCurrentPlayer=()=>{const videoPlayer=getVideoPlayerObject();if(!videoPlayer)return null;const session=getCurrentWatchSession();return session&&videoPlayer.getVideoPlayerBySessionId(session.sessionId)||null},getCurrentWatchSession=()=>withNetflix(netflix=>{const[session]=netflix.appContext.getPlayerApp().getAPI().getOpenPlaybackSessions();return session?"USER"!==session.playbackInitiator?null:session:null}),getVideoPlayerObject=()=>withNetflix(netflix=>netflix.appContext.state.playerApp.getAPI().videoPlayer),withCache=fn=>withNetflix(netflix=>fn(netflix.appContext.getState().pathEvaluator.getCache())),withNetflix=fn=>tryCatch(()=>fn(window.netflix)),tryCatch=fn=>{try{return fn()}catch(error){return console.error(error),null}};window.addEventListener("message",ev=>{return messageStr=ev.data,void consumeMessageStringAsCommand(messageStr,toPageProofKey,command=>{switch(command.key){case"play":return withCurrentPlayer(player=>player.play());case"pause":return withCurrentPlayer(player=>player.pause());case"volume":return handleVolumeCommand(command);case"skip":return handleSeekCommand(command);case"watch":return handleWatch(command);case"watchRandom":return handleWatchRandom();case"changeText":return handleChangeText(command);case"changeAudio":return handleChangeAudio(command)}});var messageStr;});};if(!document.getElementById("lipsurf-netflix-script")){const script=document.createElement("script");script.id="lipsurf-netflix-script",script.textContent=`(${injectables.toString()})("${TO_PAGE_PROOF_KEY}","${FROM_PAGE_PROOF_KEY}");`,(document.head||document.documentElement).appendChild(script),script.remove();}

export default Netflix;
export { injectables };LS-SPLITallPlugins.Netflix = (() => { const TO_PAGE_PROOF_KEY=PluginBase.util.getNoCollisionUniqueAttr(),FROM_PAGE_PROOF_KEY=PluginBase.util.getNoCollisionUniqueAttr(),sendMessage=payload=>window.postMessage(JSON.stringify({proofKey:TO_PAGE_PROOF_KEY,payload:payload})),consumeMessageStringAsCommand=(messageStr,proofKey,callback)=>{const message=(maybeJSONString=>{try{return JSON.parse(maybeJSONString)}catch(_a){return null}})(messageStr);message&&message.proofKey===proofKey&&callback(message.payload);},navigateToSearch=title=>{window.location.href=`https://www.netflix.com/search?q=${encodeURIComponent(title)}`;},navigateToWatch=videoId=>{window.location.href=`https://www.netflix.com/watch/${videoId}`;};var NetflixPluginContextEnum;!function(NetflixPluginContextEnum){NetflixPluginContextEnum.watch="Netflix Video Player Controls",NetflixPluginContextEnum.browse="Browse Netflix";}(NetflixPluginContextEnum||(NetflixPluginContextEnum={}));const contextManager=(()=>{let enabled=!0;const refreshCurrentContext=()=>{try{(context=>{const currentContextSet=new Set(PluginBase.util.getContext());switch(currentContextSet.delete(PluginBase.constants.contexts.Normal),currentContextSet.delete(NetflixPluginContextEnum.watch),currentContextSet.delete(NetflixPluginContextEnum.browse),!0){case context===NetflixPluginContextEnum.browse:return void PluginBase.util.enterContext([NetflixPluginContextEnum.browse,PluginBase.constants.contexts.Normal,...Array.from(currentContextSet)]);case context===NetflixPluginContextEnum.watch:return void PluginBase.util.enterContext([NetflixPluginContextEnum.watch,...Array.from(currentContextSet)]);default:PluginBase.util.removeContext(NetflixPluginContextEnum.watch),PluginBase.util.removeContext(NetflixPluginContextEnum.browse),PluginBase.util.addContext(PluginBase.constants.contexts.Normal);}})((url=>{const{pathname:pathname}=url;switch(!0){case pathname.startsWith("/watch"):return NetflixPluginContextEnum.watch;case pathname.startsWith("/latest"):case pathname.startsWith("/browse"):case pathname.startsWith("/title"):case pathname.startsWith("/search"):return NetflixPluginContextEnum.browse;default:return null}})(new URL(window.location.href)));}catch(error){console.error(error);}};return {enable:async()=>{for(enabled=!0;enabled;)refreshCurrentContext(),await new Promise(resolve=>setTimeout(resolve,1e3));},disable:()=>{enabled=!1,PluginBase.util.enterContext([PluginBase.constants.contexts.Normal]);}}})();var Netflix={...PluginBase,init:()=>contextManager.enable(),destroy:()=>contextManager.disable(),commands:{"Override::Netflix":{pageFn:()=>{}},"Pause Video":{pageFn:()=>sendMessage({key:"pause"}),normal:!1},"Play Video":{pageFn:()=>sendMessage({key:"play"}),normal:!1},"Volume Up":{pageFn:()=>sendMessage({key:"volume",sub:{key:"up"}}),normal:!1},"Volume Down":{pageFn:()=>sendMessage({key:"volume",sub:{key:"down"}}),normal:!1},"Volume Full":{pageFn:()=>sendMessage({key:"volume",sub:{key:"full"}}),normal:!1},"Volume Zero":{pageFn:()=>sendMessage({key:"volume",sub:{key:"zero"}}),normal:!1},"Volume Half":{pageFn:()=>sendMessage({key:"volume",sub:{key:"half"}}),normal:!1},"Volume Set In Percentage":{pageFn:(_,volumePercentage)=>sendMessage({key:"volume",sub:{key:"setPercent",percentage:volumePercentage/100}}),normal:!1},"Change Audio":{pageFn:(_,audioName)=>!!audioName&&sendMessage({key:"changeAudio",sub:{key:"ask",query:audioName}}),normal:!1},"Change Subtitle":{pageFn:(_,textName)=>!!textName&&sendMessage({key:"changeText",sub:{key:"ask",query:textName}}),normal:!1},"Seek To By Minute and Second":{pageFn:(_,minute,second=0)=>sendMessage({key:"skip",sub:{key:"to",timestamp:1e3*(60*minute+second)}}),normal:!1},"Seek To By Second":{pageFn:(_,second)=>sendMessage({key:"skip",sub:{key:"to",timestamp:1e3*second}}),normal:!1},"Seek Ahead By Second":{pageFn:(_,minute,second=0)=>sendMessage({key:"skip",sub:{key:"ahead",duration:1e3*(60*minute+second)}}),normal:!1},"Seek Ahead By Second":{pageFn:(_,second)=>sendMessage({key:"skip",sub:{key:"ahead",duration:1e3*second}}),normal:!1},"Seek Behind By Second":{pageFn:(_,minute,second=0)=>sendMessage({key:"skip",sub:{key:"behind",duration:1e3*(60*minute+second)}}),normal:!1},"Seek Behind By Second":{pageFn:(_,second)=>sendMessage({key:"skip",sub:{key:"behind",duration:1e3*second}}),normal:!1},"Watch By Title":{pageFn:(_,query)=>sendMessage({key:"watch",sub:{key:"ask-videos",query:query}}),normal:!1},"Watch Random Show":{pageFn:_=>sendMessage({key:"watchRandom"}),normal:!1},"Search Show":{pageFn:(_,title)=>navigateToSearch(title),normal:!1}}};(()=>{window.addEventListener("message",ev=>receiveMessage(ev.data));const receiveMessage=messageStr=>consumeMessageStringAsCommand(messageStr,FROM_PAGE_PROOF_KEY,command=>{switch(command.key){case"changeText":return handleChangeTextAnswer(command);case"changeAudio":return handleChangeAudioAnswer(command);case"watch":return handleWatchAnswer(command)}});})();const handleWatchAnswer=async command=>{const{sub:sub}=command;if("answer-matches"!==sub.key)return;const videos=sub.videos,exactVideo=videos.find(video=>video.title===sub.query);if(exactVideo)return navigateToWatch(exactVideo.videoId);const filteredVideos=videos.filter(video=>!!video.title.trim()),highScore=(await Promise.all(filteredVideos.map(video=>PluginBase.util.fuzzyHighScore(sub.query,[video.title],0,!0)))).map(([_,score],index)=>({score:score,index:index})).sort(({score:scoreA},{score:scoreB})=>scoreB-scoreA)[0];if(highScore.score>.8){const fuzzyVideo=filteredVideos[highScore.index];if(fuzzyVideo)return navigateToWatch(fuzzyVideo.videoId)}return navigateToSearch(sub.query)},handleChangeTextAnswer=async command=>{const{sub:sub}=command;if("answer"!==sub.key)return;const tracks=sub.texts,[index]=await PluginBase.util.fuzzyHighScore(sub.query,tracks.map(track=>track.displayName),void 0,!0),track=tracks[index];track&&sendMessage({key:"changeText",sub:{key:"to",trackId:track.trackId}});},handleChangeAudioAnswer=async command=>{const{sub:sub}=command;if("answer"!==sub.key)return;const tracks=sub.audios,[index]=await PluginBase.util.fuzzyHighScore(sub.query,tracks.map(track=>track.displayName),void 0,!0),track=tracks[index];track&&sendMessage({key:"changeAudio",sub:{key:"to",trackId:track.trackId}});},injectables=(toPageProofKey,fromPageProofKey)=>{const consumeMessageStringAsCommand=(messageStr,proofKey,callback)=>{const message=(maybeJSONString=>{try{return JSON.parse(maybeJSONString)}catch(_a){return null}})(messageStr);message&&message.proofKey===proofKey&&callback(message.payload);},sendMessage=payload=>window.postMessage(JSON.stringify({proofKey:fromPageProofKey,payload:payload})),handleChangeText=command=>{const{sub:sub}=command;switch(sub.key){case"ask":return withCurrentPlayer(player=>sendMessage({key:"changeText",sub:{key:"answer",texts:player.getTextTrackList(),query:sub.query}}));case"to":return withCurrentPlayer(player=>{const track=player.getTextTrackList().find(track=>track.trackId===sub.trackId);track&&player.setTextTrack(track);})}},handleChangeAudio=command=>{const{sub:sub}=command;switch(sub.key){case"ask":return withCurrentPlayer(player=>sendMessage({key:"changeAudio",sub:{key:"answer",audios:player.getAudioTrackList(),query:sub.query}}));case"to":return withCurrentPlayer(player=>{const track=player.getAudioTrackList().find(track=>track.trackId===sub.trackId);track&&player.setAudioTrack(track);})}},handleVolumeCommand=command=>withCurrentPlayer(player=>{switch(command.sub.key){case"up":return player.setVolume(Math.min(player.getVolume()+.1,1));case"down":return player.setVolume(Math.max(player.getVolume()-.1,0));case"full":return player.setVolume(1);case"zero":return player.setVolume(0);case"half":return player.setVolume(.5);case"setPercent":return player.setVolume(command.sub.percentage)}}),handleSeekCommand=command=>withCurrentPlayer(player=>{switch(command.sub.key){case"to":return player.seek(command.sub.timestamp);case"ahead":return player.seek(player.getCurrentTime()+command.sub.duration);case"behind":return player.seek(player.getCurrentTime()-command.sub.duration)}}),handleWatch=command=>{switch(command.sub.key){case"ask-videos":return sendMessage({key:"watch",sub:{key:"answer-matches",query:command.sub.query,videos:[...getInPageVideos(),...getInCacheVideo()].map(({videoId:videoId,title:title})=>({videoId:videoId,title:title}))}})}},getInCacheVideo=()=>withCache(cache=>{const videos=cache.videos;return videos?Object.entries(videos).map(([videoId,video])=>({videoId:videoId,title:video.title&&video.title.value||"",data:video})).filter(video=>""!==video.title):null})||[],getInPageVideos=()=>Array.from(document.querySelectorAll("a")).map(anchorElement=>{if(!anchorElement.href)return null;const url=new URL(anchorElement.href,window.location.origin);if(url.pathname.startsWith("/watch/")){const ariaLabel=anchorElement.getAttribute("aria-label")||"";return {anchorElement:anchorElement,title:ariaLabel,videoId:url.pathname.slice("/watch/".length)}}return null}).filter(result=>null!==result),handleWatchRandom=()=>{const videoIds=Array.from(new Set([...getInCacheVideo().map(({videoId:videoId})=>videoId),...getInPageVideos().map(({videoId:videoId})=>videoId)])),videoId=videoIds[Math.round(Math.random()*(videoIds.length-1))];videoId&&(videoId=>{window.location.href=`https://www.netflix.com/watch/${videoId}`;})(videoId);},withCurrentPlayer=fn=>{const currentPlayer=getCurrentPlayer();if(currentPlayer)return fn(currentPlayer)},getCurrentPlayer=()=>{const videoPlayer=getVideoPlayerObject();if(!videoPlayer)return null;const session=getCurrentWatchSession();return session&&videoPlayer.getVideoPlayerBySessionId(session.sessionId)||null},getCurrentWatchSession=()=>withNetflix(netflix=>{const[session]=netflix.appContext.getPlayerApp().getAPI().getOpenPlaybackSessions();return session?"USER"!==session.playbackInitiator?null:session:null}),getVideoPlayerObject=()=>withNetflix(netflix=>netflix.appContext.state.playerApp.getAPI().videoPlayer),withCache=fn=>withNetflix(netflix=>fn(netflix.appContext.getState().pathEvaluator.getCache())),withNetflix=fn=>tryCatch(()=>fn(window.netflix)),tryCatch=fn=>{try{return fn()}catch(error){return console.error(error),null}};window.addEventListener("message",ev=>{return messageStr=ev.data,void consumeMessageStringAsCommand(messageStr,toPageProofKey,command=>{switch(command.key){case"play":return withCurrentPlayer(player=>player.play());case"pause":return withCurrentPlayer(player=>player.pause());case"volume":return handleVolumeCommand(command);case"skip":return handleSeekCommand(command);case"watch":return handleWatch(command);case"watchRandom":return handleWatchRandom();case"changeText":return handleChangeText(command);case"changeAudio":return handleChangeAudio(command)}});var messageStr;});};if(!document.getElementById("lipsurf-netflix-script")){const script=document.createElement("script");script.id="lipsurf-netflix-script",script.textContent=`(${injectables.toString()})("${TO_PAGE_PROOF_KEY}","${FROM_PAGE_PROOF_KEY}");`,(document.head||document.documentElement).appendChild(script),script.remove();}

return Netflix;
 })()LS-SPLIT