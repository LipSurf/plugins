import PluginBase from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/plugin-base.js';import ExtensionUtil from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/extension-util.js';var o=`${PluginBase.util.getNoCollisionUniqueAttr()}-thing`;function e(n){return["[data-test-id='post-content'] ",""].map(t=>`${t}${n}`)}var s={old:{post:{thing:".thing",title:"a.title",expandBtn:".expando-button",commentarea:".commentarea"},comments:{select:"a.comments",expandBtn:".expando-button",comment:{select:".comment",expandBtn:"a.expand"}},special:{collapsed:".collapsed",expanded:".expanded",notCollapsed:":not(.collapsed)"},vote:{up:".arrow.up:not(.upmod)",down:".arrow.down:not(.downmod)",upmod:".arrow.upmod",downmod:".arrow.downmod"}},latest:{home:"a[aria-label='Home']",post:{thing:".Post"},comments:{select:"a[data-click-id='comments']",threadline:".threadline",comment:{select:".Comment",expandBtn:".icon-expand"}},vote:{up:e(".voteButton[aria-label='upvote']"),down:e(".voteButton[aria-label='downvote']"),pressed:e(".voteButton[aria-pressed='true']"),unpressed:e(".voteButton[aria-pressed='false']")}}};var a={languages:{ja:{niceName:"レディット",description:"Redditで操作します",authors:"Miko",commands:{"View Comments":{name:"コメントを診ます",match:["こめんと#"]}}},ru:{niceName:"Реддит",description:"Команды для сайта Reddit.com",authors:"Hanna, Miko",homophones:{reddit:"реддит",голоса:"голос за"},commands:{"View Comments":{name:"Открыть комментарии",description:"Открывает комментарии к посту названного номера.",match:["[комментарии/комменты] к #"]},"Visit Post":{name:"Открыть пост",description:"Кликает пост названного номера.",match:["открыть пост[/ #]"]},"Visit Current":{name:"Открыть пост",description:"Кликает пост.",match:["открыть пост"]},Expand:{name:"Развернуть",description:"Развернуть превью поста или комментария названного номера.",match:["развернуть #","# развернуть"]},"Expand Current":{name:"Развернуть",description:"Развернуть превью поста или комментария.",match:"развернуть"},Collapse:{name:"Свернуть",description:"Свернуть развернутый пост или комментарий. Если не назван номер, автоматически сворачивает самый верхний пост/ комментарий в пределах экрана.",match:["[свернуть/закрыть] #"]},"Collapse Current":{name:"Свернуть",description:"Свернуть развернутый пост или комментарий. Если не назван номер, автоматически сворачивает самый верхний пост/ комментарий в пределах экрана.",match:["свернуть","закрыть"]},"Go to Reddit":{name:"Открыть реддит",description:"Переходит на сайт reddit.com",match:"реддит"},"Clear Vote":{name:"Убрать голос",description:"Убирает последний голос за или против последнего поста или поста названного номера",match:"убрать голос #"},"Clear Vote Current":{name:"Убрать голос",description:"Убирает последний голос за или против последнего поста или поста",match:"убрать голос"},Downvote:{name:"Голос против",description:"Голосует поста названного # (пока нет поддержки комментариев)",match:"голос против #"},"Downvote Current":{name:"Голос против",description:"Голосует против данного поста (пока нет поддержки комментариев)",match:"голос против"},Upvote:{name:"Голос за",description:"Голосует за пост названного # (пока нет поддержки комментариев)",match:"голос за #"},"Upvote Current":{name:"Голос за",description:"Голосует за данный пост (пока нет поддержки комментариев)",match:"голос за"},"Expand All Comments":{name:"Показать все комментарии",description:"Открывает все комментарии к данному посту",match:["[показать/открыть] все комментарии"]}}}},niceName:"Reddit",description:"Commands for Reddit.com",version:"4.5.1-alpha.0",apiVersion:2,match:/^https?:\/\/.*\.reddit.com/,authors:"Miko, Anar",homophones:{navigate:"go",contract:"collapse",claps:"collapse",expense:"expand",explain:"expand",expanding:"expand","expand noun":"expand 9","it's been":"expand",expanse:"expand",expanded:"expand",stand:"expand",xpand:"expand",xmen:"expand",spend:"expand",span:"expand",spell:"expand",spent:"expand","reddit dot com":"reddit","read it":"reddit",shrink:"collapse",advert:"upvote",download:"downvote",commence:"comments"},contexts:{"Post List":{commands:["View Comments","Visit Post","Expand","Collapse","Upvote","Downvote","Clear Vote"]},Post:{commands:["Upvote Current","Downvote Current","Clear Vote Current","Visit Current","Expand Current","Collapse Current","Expand All Comments"]}},commands:[{name:"Go to Reddit",global:!0,match:["[/go to ]reddit"],minConfidence:.5},{name:"Go to Subreddit",match:{fn:()=>{},description:"go to/show r [subreddit name] (do not say slash)"},isFinal:!0,nice:(n,t)=>`go to r/${t}`},{name:"View Comments",description:"View the comments of a reddit post.",match:["comments #","# comments"],normal:!1},{name:"Visit Post",description:"Equivalent of clicking a reddit post.",match:["visit #","# visit"],normal:!1},{name:"Expand",description:"Expand a preview of a post, or a comment by it's position (rank).",match:["expand #","# expand"],normal:!1},{name:"Collapse",description:"Collapse an expanded preview (or comment if viewing comments). Defaults to topmost in the view port.",match:["collapse #","# collapse"],normal:!1},{name:"Upvote",match:["upvote #","# upvote"],description:"Upvote the post # (doesn't work for comments yet)",normal:!1},{name:"Downvote",match:["downvote #","# downvote"],description:"Downvote the post # (doesn't work for comments yet)",normal:!1},{name:"Clear Vote",description:"Unsets the upvote/downvote so it's neither up or down.",match:["[clear/reset] vote #","# [clear/reset] vote"],normal:!1},{name:"Upvote Current",match:"upvote",description:"Upvote the current post.",normal:!1},{name:"Downvote Current",match:"downvote",description:"Downvote the post # (doesn't work for comments yet)",normal:!1},{name:"Clear Vote Current",description:"Unsets the upvote/downvote so it's neither up or down.",match:["[clear/reset] vote"],normal:!1},{name:"Visit Current",description:"Click the link for the post that we're in.",match:"visit",normal:!1},{name:"Expand Current",description:"Expand the post that we're in.",match:"expand",normal:!1},{name:"Collapse Current",description:"Collapse the current post that we're in.",match:["collapse","close"],normal:!1},{name:"Expand All Comments",description:"Expands all the comments.",match:["expand all[/ comments]"],normal:!1}]};export{a as default};
LS-SPLITallPlugins.Reddit=(()=>{function g(e,t){Object.keys(e).forEach(n=>{t.style[n]=e[n]})}function r(e,t){return(t||document).querySelector(e)}function u(e,t){return(t||document).querySelectorAll(e)}var h=`${PluginBase.util.getNoCollisionUniqueAttr()}-thing`,P=/reddit.com\/r\/[^\/]*\/comments\//,s=!1,B=null,p=null,m=null,d=0,w=!1,x=!1,k;function E(e){return["[data-test-id='post-content'] ",""].map(t=>`${t}${e}`)}var c={old:{post:{thing:".thing",title:"a.title",expandBtn:".expando-button",commentarea:".commentarea"},comments:{select:"a.comments",expandBtn:".expando-button",comment:{select:".comment",expandBtn:"a.expand"}},special:{collapsed:".collapsed",expanded:".expanded",notCollapsed:":not(.collapsed)"},vote:{up:".arrow.up:not(.upmod)",down:".arrow.down:not(.downmod)",upmod:".arrow.upmod",downmod:".arrow.downmod"}},latest:{home:"a[aria-label='Home']",post:{thing:".Post"},comments:{select:"a[data-click-id='comments']",threadline:".threadline",comment:{select:".Comment",expandBtn:".icon-expand"}},vote:{up:E(".voteButton[aria-label='upvote']"),down:E(".voteButton[aria-label='downvote']"),pressed:E(".voteButton[aria-pressed='true']"),unpressed:E(".voteButton[aria-pressed='false']")}}};function f(e){return s?`${c.old.post.thing}[${h}="${e}"]`:`${c.latest.post.thing}[${h}="${e}"]`}function F(e,t){let n=null;setTimeout(()=>{m=u(c.latest.post.thing),m&&m.length?(clearTimeout(n),setTimeout(e)):n=setTimeout(()=>{F(e,t)},t)})}function $(...e){for(let t of e){let n=r(t);if(n){n.click();break}}}function C(e){parseFloat(getComputedStyle(e).width)&&e.click()}function A(e){let t=document.createElement("span");return t.textContent=""+e,t.className="post-number",t}function I(e,t){if(t)return e.forEach(n=>{d+=1,n.setAttribute(h,`${d}`);let o=r(".rank",n),i=A(d);g({position:"relative"},n),g({visibility:"hidden"},o),g({position:"absolute",top:"20px",left:"10px",fontWeight:700,fontSize:"1rem",color:"#999999",transform:"translateY(-50%)"},i),n.appendChild(i)});e.forEach(y)}function y(e){var t;if(!e)return;let n=(t=r(".post-number",e))===null||t===void 0?void 0:t.textContent;if(n&&(d=+n),e&&getComputedStyle(e).display!=="none"&&!n&&(d+=1,e.setAttribute(h,`${d}`),g({position:"relative",overflow:"visible"},e),!P.test(window.location.href))){let o=A(d);g({position:"absolute",top:"0",right:"102%",fontWeight:700,opacity:.8},o),e.appendChild(o)}}function O(e){let{old:t,latest:n}=c,o=s?t.post.thing:n.post.thing;e.forEach(i=>{i.addedNodes.forEach(l=>{let a=r(o,l);y(a)})})}function G(e){p=new MutationObserver(O),p.observe(e,{childList:!0})}function M(e){var t,n,o;return(e==null||(t=e[0])===null||t===void 0||(n=t.parentNode)===null||n===void 0||(o=n.parentNode)===null||o===void 0?void 0:o.parentNode)||null}function v(e,t){let{old:n,latest:o}=c,i=[];if(e==="clear"){let l=t&&f(t);t&&s?i=[`${l} ${n.vote.downmod}, ${l} ${n.vote.upmod}`]:!t&&s?i=[`${n.vote.downmod},${n.vote.upmod}`]:t&&!s?i=o.vote.pressed.map(a=>`${l} ${a}`):i=o.vote.pressed}else i=s?[n.vote[e]]:o.vote[e],t&&(i=i.map(l=>`${f(t)} ${l}`));$(...i)}function L(){let{post:e,special:t,comments:n}=c.old,{comment:o}=n,i=`${o.select}${t.notCollapsed} ${o.expandBtn}`,l=c.latest.comments.threadline;return{postExpBtn:s?`${e.expandBtn}${t.expanded}`:"",comExpBtn:s?i:l}}function b(){let{comments:e,special:t,post:n}=c.old,o={comExpBtn:"",postExpBtn:"",comment:""};return s?(o.comExpBtn=e.comment.expandBtn,o.postExpBtn=`${n.thing} ${e.expandBtn}`,o.comment=`${e.comment.select}${t.collapsed}`):(o.comment=c.latest.comments.comment.select,o.comExpBtn=c.latest.comments.comment.expandBtn),o}async function _(){let{postExpBtn:e,comExpBtn:t,comment:n}=b(),o=!!e&&r(e)||null;if(o&&PluginBase.util.isVisible(o))o.click();else{let i=s?n:t,l,a=Array.from(u(i));for(l of a.reverse())if(PluginBase.util.isVisible(l))return s?r(t,l).click():C(l.parentNode)}}async function z(){let{comment:e,comExpBtn:t}=b(),n=s?`${e} ${t}`:t;for(let o of u(n))s?o.click():C(o.parentNode)}function X(){let{postExpBtn:e,comExpBtn:t}=L(),n=!!e&&r(e)||null,o=u(t);n&&PluginBase.util.isVisible(n)&&n.click();for(let i of o)if(PluginBase.util.isVisible(i)){i.click();break}}function U(){d=0,w=!1,B=null,p==null||p.disconnect(),p=null}function S(){k=window.location.href;let{old:e,latest:t}=c;if(s=!!r(e.post.thing),w)return;let n=s?e.post.thing:t.post.thing;if(m=u(n),w=!0,I(m,s),!s){let o=r(c.latest.home);window.addEventListener("click",T),o==null||o.addEventListener("click",W),B=M(m),B&&G(B)}}function N(){F(()=>{window.location.hostname.endsWith("reddit.com")?(w=!1,d=0,S(),R(P.test(window.location.href))):PluginBase.util.removeContext("Post List","Post")},200)}function V(){setTimeout(N)}function T(){!x&&k===window.location.href||setTimeout(()=>{x&&(x=!1),N(),k=window.location.href})}function W(){x=!0}function R(e=!1){e?(PluginBase.util.prependContext("Post"),PluginBase.util.removeContext("Post List")):(PluginBase.util.prependContext("Post List"),PluginBase.util.removeContext("Post"))}function D(e){let t=new Event(e);window.dispatchEvent(t)}var q={...PluginBase,init:async()=>{window.location.hostname.endsWith("reddit.com")&&(R(P.test(window.location.href)),window.addEventListener("load",S),window.addEventListener("popstate",V),await PluginBase.util.ready(),setTimeout(()=>{w||D("load")},2e3))},destroy:()=>{U(),PluginBase.util.removeContext("Post List","Post"),window.removeEventListener("load",S),!s&&window.removeEventListener("popstate",V),!s&&window.removeEventListener("click",T)},commands:{"Go to Reddit":{pageFn:()=>{document.location.href="https://www.reddit.com"}},"Go to Subreddit":{match:{en:({normTs:e,preTs:t})=>{let n=/\b(?:go to |show )?(?:are|our|r) (.*)/,o=t.match(n);if(o){let i=o.index+o[0].length;return[o.index,i,[o[1].replace(/\s/g,"")]]}}},isFinal:!0,nice:(e,t)=>`go to r/${t}`,pageFn:(e,t)=>{window.location.href=`https://www.reddit.com/r/${t}`}},"View Comments":{pageFn:(e,t)=>{let n=s?` ${c.old.comments.select}`:` ${c.latest.comments.select}`;$(f(t)+n)}},"Visit Post":{pageFn:(e,t)=>{let n=s?` ${c.old.post.title}`:c.latest.post.thing;$(f(t)+n)}},Expand:{pageFn:(e,t)=>{let{comments:n,special:o}=c.old,i=r(`${f(t)} ${n.expandBtn}${o.collapsed}`);i.click(),PluginBase.util.scrollToAnimated(i,-25)}},Collapse:{pageFn:(e,t)=>{let{comments:n,special:o}=c.old,i=r(f(t)+` ${n.expandBtn}${o.expanded}`);i==null||i.click()}},Upvote:{pageFn:(e,t)=>v("up",t)},Downvote:{pageFn:(e,t)=>v("down",t)},"Clear Vote":{pageFn:(e,t)=>v("clear",t)},"Upvote Current":{pageFn:()=>v("up")},"Downvote Current":{pageFn:()=>v("down")},"Clear Vote Current":{pageFn:()=>v("clear")},"Visit Current":{pageFn:()=>{D("popstate"),$("#siteTable a.title")}},"Expand Current":{pageFn:async function(){let{postExpBtn:t,comExpBtn:n,comment:o}=b(),i=!!t&&r(t)||null;if(i&&PluginBase.util.isVisible(i))i.click();else{let l=s?o:n,a,H=Array.from(u(l));for(a of H.reverse())if(PluginBase.util.isVisible(a))return s?r(n,a).click():C(a.parentNode)}}},"Collapse Current":{pageFn:function(){let{postExpBtn:t,comExpBtn:n}=L(),o=!!t&&r(t)||null,i=u(n);o&&PluginBase.util.isVisible(o)&&o.click();for(let l of i)if(PluginBase.util.isVisible(l)){l.click();break}}},"Expand All Comments":{pageFn:async function(){let{comment:t,comExpBtn:n}=b(),o=s?`${t} ${n}`:n;for(let i of u(o))s?i.click():C(i.parentNode)}}}};return q})();
LS-SPLITallPlugins.Reddit=(()=>{function m(t,e){Object.keys(t).forEach(n=>{e.style[n]=t[n]})}function a(t,e){return(e||document).querySelector(t)}function p(t,e){return(e||document).querySelectorAll(t)}var w=`${PluginBase.util.getNoCollisionUniqueAttr()}-thing`,x=/reddit.com\/r\/[^\/]*\/comments\//,s=!1,h=null,d=null,u=null,r=0,f=!1,g=!1,E;function B(t){return["[data-test-id='post-content'] ",""].map(e=>`${e}${t}`)}var c={old:{post:{thing:".thing",title:"a.title",expandBtn:".expando-button",commentarea:".commentarea"},comments:{select:"a.comments",expandBtn:".expando-button",comment:{select:".comment",expandBtn:"a.expand"}},special:{collapsed:".collapsed",expanded:".expanded",notCollapsed:":not(.collapsed)"},vote:{up:".arrow.up:not(.upmod)",down:".arrow.down:not(.downmod)",upmod:".arrow.upmod",downmod:".arrow.downmod"}},latest:{home:"a[aria-label='Home']",post:{thing:".Post"},comments:{select:"a[data-click-id='comments']",threadline:".threadline",comment:{select:".Comment",expandBtn:".icon-expand"}},vote:{up:B(".voteButton[aria-label='upvote']"),down:B(".voteButton[aria-label='downvote']"),pressed:B(".voteButton[aria-pressed='true']"),unpressed:B(".voteButton[aria-pressed='false']")}}};function b(t){return s?`${c.old.post.thing}[${w}="${t}"]`:`${c.latest.post.thing}[${w}="${t}"]`}function C(t,e){let n=null;setTimeout(()=>{u=p(c.latest.post.thing),u&&u.length?(clearTimeout(n),setTimeout(t)):n=setTimeout(()=>{C(t,e)},e)})}function T(...t){for(let e of t){let n=a(e);if(n){n.click();break}}}function P(t){parseFloat(getComputedStyle(t).width)&&t.click()}function k(t){let e=document.createElement("span");return e.textContent=""+t,e.className="post-number",e}function O(t,e){if(e)return t.forEach(n=>{r+=1,n.setAttribute(w,`${r}`);let o=a(".rank",n),i=k(r);m({position:"relative"},n),m({visibility:"hidden"},o),m({position:"absolute",top:"20px",left:"10px",fontWeight:700,fontSize:"1rem",color:"#999999",transform:"translateY(-50%)"},i),n.appendChild(i)});t.forEach(S)}function S(t){var e;if(!t)return;let n=(e=a(".post-number",t))===null||e===void 0?void 0:e.textContent;if(n&&(r=+n),t&&getComputedStyle(t).display!=="none"&&!n&&(r+=1,t.setAttribute(w,`${r}`),m({position:"relative",overflow:"visible"},t),!x.test(window.location.href))){let o=k(r);m({position:"absolute",top:"0",right:"102%",fontWeight:700,opacity:.8},o),t.appendChild(o)}}function I(t){let{old:e,latest:n}=c,o=s?e.post.thing:n.post.thing;t.forEach(i=>{i.addedNodes.forEach(l=>{let v=a(o,l);S(v)})})}function M(t){d=new MutationObserver(I),d.observe(t,{childList:!0})}function V(t){var e,n,o;return(t==null||(e=t[0])===null||e===void 0||(n=e.parentNode)===null||n===void 0||(o=n.parentNode)===null||o===void 0?void 0:o.parentNode)||null}function F(t,e){let{old:n,latest:o}=c,i=[];if(t==="clear"){let l=e&&b(e);e&&s?i=[`${l} ${n.vote.downmod}, ${l} ${n.vote.upmod}`]:!e&&s?i=[`${n.vote.downmod},${n.vote.upmod}`]:e&&!s?i=o.vote.pressed.map(v=>`${l} ${v}`):i=o.vote.pressed}else i=s?[n.vote[t]]:o.vote[t],e&&(i=i.map(l=>`${b(e)} ${l}`));T(...i)}function W(){let{post:t,special:e,comments:n}=c.old,{comment:o}=n,i=`${o.select}${e.notCollapsed} ${o.expandBtn}`,l=c.latest.comments.threadline;return{postExpBtn:s?`${t.expandBtn}${e.expanded}`:"",comExpBtn:s?i:l}}function L(){let{comments:t,special:e,post:n}=c.old,o={comExpBtn:"",postExpBtn:"",comment:""};return s?(o.comExpBtn=t.comment.expandBtn,o.postExpBtn=`${n.thing} ${t.expandBtn}`,o.comment=`${t.comment.select}${e.collapsed}`):(o.comment=c.latest.comments.comment.select,o.comExpBtn=c.latest.comments.comment.expandBtn),o}async function G(){let{postExpBtn:t,comExpBtn:e,comment:n}=L(),o=!!t&&a(t)||null;if(o&&PluginBase.util.isVisible(o))o.click();else{let i=s?n:e,l,v=Array.from(p(i));for(l of v.reverse())if(PluginBase.util.isVisible(l))return s?a(e,l).click():P(l.parentNode)}}async function _(){let{comment:t,comExpBtn:e}=L(),n=s?`${t} ${e}`:e;for(let o of p(n))s?o.click():P(o.parentNode)}function U(){let{postExpBtn:t,comExpBtn:e}=W(),n=!!t&&a(t)||null,o=p(e);n&&PluginBase.util.isVisible(n)&&n.click();for(let i of o)if(PluginBase.util.isVisible(i)){i.click();break}}function q(){r=0,f=!1,h=null,d==null||d.disconnect(),d=null}function $(){E=window.location.href;let{old:t,latest:e}=c;if(s=!!a(t.post.thing),f)return;let n=s?t.post.thing:e.post.thing;if(u=p(n),f=!0,O(u,s),!s){let o=a(c.latest.home);window.addEventListener("click",N),o==null||o.addEventListener("click",D),h=V(u),h&&M(h)}}function y(){C(()=>{window.location.hostname.endsWith("reddit.com")?(f=!1,r=0,$(),R(x.test(window.location.href))):PluginBase.util.removeContext("Post List","Post")},200)}function A(){setTimeout(y)}function N(){!g&&E===window.location.href||setTimeout(()=>{g&&(g=!1),y(),E=window.location.href})}function D(){g=!0}function R(t=!1){t?(PluginBase.util.prependContext("Post"),PluginBase.util.removeContext("Post List")):(PluginBase.util.prependContext("Post List"),PluginBase.util.removeContext("Post"))}function H(t){let e=new Event(t);window.dispatchEvent(e)}var z={...PluginBase,init:async()=>{window.location.hostname.endsWith("reddit.com")&&(R(x.test(window.location.href)),window.addEventListener("load",$),window.addEventListener("popstate",A),await PluginBase.util.ready(),setTimeout(()=>{f||H("load")},2e3))},destroy:()=>{q(),PluginBase.util.removeContext("Post List","Post"),window.removeEventListener("load",$),!s&&window.removeEventListener("popstate",A),!s&&window.removeEventListener("click",N)},commands:{"Go to Reddit":{pageFn:()=>{document.location.href="https://www.reddit.com"}}}};return z})();
