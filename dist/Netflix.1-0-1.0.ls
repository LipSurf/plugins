import PluginBase from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/plugin-base.js';import ExtensionUtil from 'chrome-extension://lnnmjmalakahagblkkcnjkoaihlfglon/dist/modules/extension-util.js';var v="lipsurf-netflix-script",S=PluginBase.util.getNoCollisionUniqueAttr(),x=PluginBase.util.getNoCollisionUniqueAttr(),i=a=>window.postMessage(JSON.stringify({proofKey:S,payload:a})),M=a=>{try{return JSON.parse(a)}catch{return null}},W=(a,n,r)=>{let c=M(a);c&&c.proofKey===n&&r(c.payload)},P=a=>{window.location.href=`https://www.netflix.com/search?q=${encodeURIComponent(a)}`},C=a=>{window.location.href=`https://www.netflix.com/watch/${a}`},h={watch:"Netflix Video Player Controls",browse:"Browse Netflix"},B=(()=>{let a=!0,n=u=>{let{pathname:o}=u;switch(!0){case o.startsWith("/watch"):return h.watch;case o.startsWith("/latest"):case o.startsWith("/browse"):case o.startsWith("/title"):case o.startsWith("/search"):return h.browse;default:return null}},r=u=>{let o=new Set(PluginBase.util.getContext());switch(o.delete(PluginBase.constants.contexts.Normal),o.delete(h.watch),o.delete(h.browse),!0){case u===h.browse:{PluginBase.util.enterContext([h.browse,PluginBase.constants.contexts.Normal,...Array.from(o)]);return}case u===h.watch:{PluginBase.util.enterContext([h.watch,...Array.from(o)]);return}default:{PluginBase.util.removeContext(h.watch),PluginBase.util.removeContext(h.browse),PluginBase.util.appendContext(PluginBase.constants.contexts.Normal);return}}},c=()=>{try{r(n(new URL(window.location.href)))}catch(u){console.error(u)}};return{enable:async()=>{for(a=!0;a;)c(),await new Promise(u=>setTimeout(u,1e3))},disable:()=>{a=!1,PluginBase.util.enterContext([PluginBase.constants.contexts.Normal])}}})(),R={...PluginBase,languages:{},niceName:"Netflix",description:"A Netflix plugin to assist audience in operating the video player and navigating through netflix web application",match:/.*\.netflix.com/,version:"1.0.1",apiVersion:2,authors:"Alan, Miko",init:()=>{if(!document.getElementById(v)){let a=document.createElement("script");a.id=v,a.textContent=`(${L.toString()})("${S}","${x}");`,(document.head||document.documentElement).appendChild(a),a.remove()}B.enable()},destroy:()=>B.disable(),homophones:{search:"search"},contexts:{[h.watch]:{commands:["Pause Video","Play Video","Volume Up","Volume Down","Volume Full","Volume Zero","Volume Half","Volume Set In Percentage","Change Audio","Change Subtitle","Seek To By Minute and Second","Seek To By Second","Seek Ahead By Second","Seek Ahead By Second","Seek Behind By Second","Seek Behind By Second"]},[h.browse]:{commands:["Watch By Title","Watch Random Show","Search Show"]}},commands:[{name:"Override::Netflix",match:"netflix",pageFn:()=>{}},{name:"Pause Video",match:["pause","stop"],pageFn:()=>i({key:"pause"}),normal:!1},{name:"Play Video",match:"play",pageFn:()=>i({key:"play"}),normal:!1},{name:"Volume Up",match:"[volume/sound level] up",pageFn:()=>i({key:"volume",sub:{key:"up"}}),normal:!1},{name:"Volume Down",match:"[volume/sound level] down",pageFn:()=>i({key:"volume",sub:{key:"down"}}),normal:!1},{name:"Volume Full",match:"[volume/sound level] full",pageFn:()=>i({key:"volume",sub:{key:"full"}}),normal:!1},{name:"Volume Zero",match:"[volume/sound level] zero",pageFn:()=>i({key:"volume",sub:{key:"zero"}}),normal:!1},{name:"Volume Half",match:"[volume/sound level] half",pageFn:()=>i({key:"volume",sub:{key:"half"}}),normal:!1},{name:"Volume Set In Percentage",match:"set [volume/sound level] to # percent",pageFn:(a,n)=>i({key:"volume",sub:{key:"setPercent",percentage:n/100}}),normal:!1},{name:"Change Audio",match:["[/change/switch] audio to *"],pageFn:(a,n)=>i({key:"changeAudio",sub:{key:"ask",query:n.normTs}}),normal:!1},{name:"Change Subtitle",match:["[/change/switch] [text/subtitle] to *"],pageFn:(a,n)=>i({key:"changeText",sub:{key:"ask",query:n.normTs}}),normal:!1},{name:"Seek To By Minute and Second",match:["skip to minute #","skip to minute # second #"],pageFn:(a,n,r=0)=>i({key:"skip",sub:{key:"to",timestamp:(60*n+r)*1e3}}),normal:!1},{name:"Seek To By Second",match:["skip to second #"],pageFn:(a,n)=>i({key:"skip",sub:{key:"to",timestamp:n*1e3}}),normal:!1},{name:"Seek Ahead By Second",match:["skip ahead # [minute/minutes]","skip ahead # [minute/minutes] # [second/seconds]"],pageFn:(a,n,r=0)=>i({key:"skip",sub:{key:"ahead",duration:(60*n+r)*1e3}}),normal:!1},{name:"Seek Ahead By Second",match:["skip ahead # [second/seconds]"],pageFn:(a,n)=>i({key:"skip",sub:{key:"ahead",duration:n*1e3}}),normal:!1},{name:"Seek Behind By Second",match:["skip behind # [minute/minutes]","skip behind # [minute/minutes] # [second/seconds]"],pageFn:(a,n,r=0)=>i({key:"skip",sub:{key:"behind",duration:(60*n+r)*1e3}}),normal:!1},{name:"Seek Behind By Second",match:["skip behind # [second/seconds]"],pageFn:(a,n)=>i({key:"skip",sub:{key:"behind",duration:n*1e3}}),normal:!1},{name:"Watch By Title",match:["[watch/play] *"],pageFn:(a,n)=>i({key:"watch",sub:{key:"ask-videos",query:n.normTs}}),normal:!1},{name:"Watch Random Show",match:["random"],pageFn:()=>i({key:"watchRandom"}),normal:!1},{name:"Search Show",match:["search *"],pageFn:(a,n)=>P(n.normTs),normal:!1}]};(()=>{window.addEventListener("message",n=>a(n.data));let a=n=>W(n,x,r=>{switch(r.key){case"changeText":return z(r);case"changeAudio":return E(r);case"watch":return _(r)}})})();var _=async a=>{let{sub:n}=a;if(n.key!=="answer-matches")return;let r=n.videos,c=r.find(l=>l.title===n.query);if(c)return C(c.videoId);let u=r.filter(l=>!!l.title.trim()),y=(await Promise.all(u.map(l=>PluginBase.util.fuzzyHighScore(n.query,[l.title],0,!0)))).map(([l,g],p)=>({score:g,index:p})).sort(({score:l},{score:g})=>g-l)[0];if(y.score>.8){let l=u[y.index];if(l)return C(l.videoId)}return P(n.query)},z=async a=>{let{sub:n}=a;if(n.key!=="answer")return;let r=n.texts,[c]=await PluginBase.util.fuzzyHighScore(n.query,r.map(o=>o.displayName),void 0,!0),u=r[c];!u||i({key:"changeText",sub:{key:"to",trackId:u.trackId}})},E=async a=>{let{sub:n}=a;if(n.key!=="answer")return;let r=n.audios,[c]=await PluginBase.util.fuzzyHighScore(n.query,r.map(o=>o.displayName),void 0,!0),u=r[c];!u||i({key:"changeAudio",sub:{key:"to",trackId:u.trackId}})},L=(a,n)=>{let r=t=>{try{return JSON.parse(t)}catch{return null}},c=(t,e,s)=>{let d=r(t);d&&d.proofKey===e&&s(d.payload)},u=t=>{window.location.href=`https://www.netflix.com/watch/${t}`},o=t=>window.postMessage(JSON.stringify({proofKey:n,payload:t})),y=t=>{c(t,a,e=>{switch(e.key){case"play":return m(s=>s.play());case"pause":return m(s=>s.pause());case"volume":return p(e);case"skip":return A(e);case"watch":return T(e);case"watchRandom":return V();case"changeText":return l(e);case"changeAudio":return g(e)}})},l=t=>{let{sub:e}=t;switch(e.key){case"ask":return m(s=>o({key:"changeText",sub:{key:"answer",texts:s.getTextTrackList(),query:e.query}}));case"to":return m(s=>{let d=s.getTextTrackList().find(f=>f.trackId===e.trackId);!d||s.setTextTrack(d)})}},g=t=>{let{sub:e}=t;switch(e.key){case"ask":return m(s=>o({key:"changeAudio",sub:{key:"answer",audios:s.getAudioTrackList(),query:e.query}}));case"to":return m(s=>{let d=s.getAudioTrackList().find(f=>f.trackId===e.trackId);!d||s.setAudioTrack(d)})}},p=t=>m(e=>{switch(t.sub.key){case"up":return e.setVolume(Math.min(e.getVolume()+.1,1));case"down":return e.setVolume(Math.max(e.getVolume()-.1,0));case"full":return e.setVolume(1);case"zero":return e.setVolume(0);case"half":return e.setVolume(.5);case"setPercent":return e.setVolume(t.sub.percentage)}}),A=t=>m(e=>{switch(t.sub.key){case"to":return e.seek(t.sub.timestamp);case"ahead":return e.seek(e.getCurrentTime()+t.sub.duration);case"behind":return e.seek(e.getCurrentTime()-t.sub.duration)}}),T=t=>{switch(t.sub.key){case"ask-videos":return o({key:"watch",sub:{key:"answer-matches",query:t.sub.query,videos:[...b(),...w()].map(({videoId:e,title:s})=>({videoId:e,title:s}))}})}},w=()=>q(t=>{let e=t.videos;return e?Object.entries(e).map(([s,d])=>({videoId:s,title:d.title&&d.title.value||"",data:d})).filter(s=>s.title!==""):null})||[],b=()=>Array.from(document.querySelectorAll("a")).map(t=>{if(!t.href)return null;let e=new URL(t.href,window.location.origin);if(e.pathname.startsWith("/watch/")){let s=t.getAttribute("aria-label")||"";return{anchorElement:t,title:s,videoId:e.pathname.slice("/watch/".length)}}return null}).filter(t=>t!==null),V=()=>{let t=Array.from(new Set([...w().map(({videoId:s})=>s),...b().map(({videoId:s})=>s)])),e=t[Math.round(Math.random()*(t.length-1))];!e||u(e)},m=t=>{let e=F();if(e)return t(e)},F=()=>{let t=N();if(!t)return null;let e=I();return e&&t.getVideoPlayerBySessionId(e.sessionId)||null},I=()=>k(t=>{let[e]=t.appContext.getPlayerApp().getAPI().getOpenPlaybackSessions();return!e||e.playbackInitiator!=="USER"?null:e}),N=()=>k(t=>t.appContext.state.playerApp.getAPI().videoPlayer),q=t=>k(e=>t(e.appContext.getState().pathEvaluator.getCache())),k=t=>O(()=>t(window.netflix)),O=t=>{try{return t()}catch(e){return console.error(e),null}};window.addEventListener("message",t=>y(t.data))},U=R;export{U as default};
LS-SPLITallPlugins.Netflix=(()=>{var f="lipsurf-netflix-script",b=PluginBase.util.getNoCollisionUniqueAttr(),v=PluginBase.util.getNoCollisionUniqueAttr(),u=r=>window.postMessage(JSON.stringify({proofKey:b,payload:r})),A=r=>{try{return JSON.parse(r)}catch{return null}},B=(r,n,a)=>{let c=A(r);c&&c.proofKey===n&&a(c.payload)},x=r=>{window.location.href=`https://www.netflix.com/search?q=${encodeURIComponent(r)}`},P=r=>{window.location.href=`https://www.netflix.com/watch/${r}`},h={watch:"Netflix Video Player Controls",browse:"Browse Netflix"},C=(()=>{let r=!0,n=i=>{let{pathname:o}=i;switch(!0){case o.startsWith("/watch"):return h.watch;case o.startsWith("/latest"):case o.startsWith("/browse"):case o.startsWith("/title"):case o.startsWith("/search"):return h.browse;default:return null}},a=i=>{let o=new Set(PluginBase.util.getContext());switch(o.delete(PluginBase.constants.contexts.Normal),o.delete(h.watch),o.delete(h.browse),!0){case i===h.browse:{PluginBase.util.enterContext([h.browse,PluginBase.constants.contexts.Normal,...Array.from(o)]);return}case i===h.watch:{PluginBase.util.enterContext([h.watch,...Array.from(o)]);return}default:{PluginBase.util.removeContext(h.watch),PluginBase.util.removeContext(h.browse),PluginBase.util.appendContext(PluginBase.constants.contexts.Normal);return}}},c=()=>{try{a(n(new URL(window.location.href)))}catch(i){console.error(i)}};return{enable:async()=>{for(r=!0;r;)c(),await new Promise(i=>setTimeout(i,1e3))},disable:()=>{r=!1,PluginBase.util.enterContext([PluginBase.constants.contexts.Normal])}}})(),I={...PluginBase,init:()=>{if(!document.getElementById(f)){let r=document.createElement("script");r.id=f,r.textContent=`(${q.toString()})("${b}","${v}");`,(document.head||document.documentElement).appendChild(r),r.remove()}C.enable()},destroy:()=>C.disable(),commands:{"Override::Netflix":{pageFn:()=>{}},"Pause Video":{pageFn:()=>u({key:"pause"})},"Play Video":{pageFn:()=>u({key:"play"})},"Volume Up":{pageFn:()=>u({key:"volume",sub:{key:"up"}})},"Volume Down":{pageFn:()=>u({key:"volume",sub:{key:"down"}})},"Volume Full":{pageFn:()=>u({key:"volume",sub:{key:"full"}})},"Volume Zero":{pageFn:()=>u({key:"volume",sub:{key:"zero"}})},"Volume Half":{pageFn:()=>u({key:"volume",sub:{key:"half"}})},"Volume Set In Percentage":{pageFn:(r,n)=>u({key:"volume",sub:{key:"setPercent",percentage:n/100}})},"Change Audio":{pageFn:(r,n)=>u({key:"changeAudio",sub:{key:"ask",query:n.normTs}})},"Change Subtitle":{pageFn:(r,n)=>u({key:"changeText",sub:{key:"ask",query:n.normTs}})},"Seek To By Minute and Second":{pageFn:(r,n,a=0)=>u({key:"skip",sub:{key:"to",timestamp:(60*n+a)*1e3}})},"Seek To By Second":{pageFn:(r,n)=>u({key:"skip",sub:{key:"to",timestamp:n*1e3}})},"Seek Ahead By Second":{pageFn:(r,n)=>u({key:"skip",sub:{key:"ahead",duration:n*1e3}})},"Seek Behind By Second":{pageFn:(r,n)=>u({key:"skip",sub:{key:"behind",duration:n*1e3}})},"Watch By Title":{pageFn:(r,n)=>u({key:"watch",sub:{key:"ask-videos",query:n.normTs}})},"Watch Random Show":{pageFn:()=>u({key:"watchRandom"})},"Search Show":{pageFn:(r,n)=>x(n.normTs)}}};(()=>{window.addEventListener("message",n=>r(n.data));let r=n=>B(n,v,a=>{switch(a.key){case"changeText":return F(a);case"changeAudio":return N(a);case"watch":return V(a)}})})();var V=async r=>{let{sub:n}=r;if(n.key!=="answer-matches")return;let a=n.videos,c=a.find(l=>l.title===n.query);if(c)return P(c.videoId);let i=a.filter(l=>!!l.title.trim()),k=(await Promise.all(i.map(l=>PluginBase.util.fuzzyHighScore(n.query,[l.title],0,!0)))).map(([l,y],w)=>({score:y,index:w})).sort(({score:l},{score:y})=>y-l)[0];if(k.score>.8){let l=i[k.index];if(l)return P(l.videoId)}return x(n.query)},F=async r=>{let{sub:n}=r;if(n.key!=="answer")return;let a=n.texts,[c]=await PluginBase.util.fuzzyHighScore(n.query,a.map(o=>o.displayName),void 0,!0),i=a[c];!i||u({key:"changeText",sub:{key:"to",trackId:i.trackId}})},N=async r=>{let{sub:n}=r;if(n.key!=="answer")return;let a=n.audios,[c]=await PluginBase.util.fuzzyHighScore(n.query,a.map(o=>o.displayName),void 0,!0),i=a[c];!i||u({key:"changeAudio",sub:{key:"to",trackId:i.trackId}})},q=(r,n)=>{let a=t=>{try{return JSON.parse(t)}catch{return null}},c=(t,e,s)=>{let d=a(t);d&&d.proofKey===e&&s(d.payload)},i=t=>{window.location.href=`https://www.netflix.com/watch/${t}`},o=t=>window.postMessage(JSON.stringify({proofKey:n,payload:t})),k=t=>{c(t,r,e=>{switch(e.key){case"play":return g(s=>s.play());case"pause":return g(s=>s.pause());case"volume":return w(e);case"skip":return O(e);case"watch":return M(e);case"watchRandom":return W();case"changeText":return l(e);case"changeAudio":return y(e)}})},l=t=>{let{sub:e}=t;switch(e.key){case"ask":return g(s=>o({key:"changeText",sub:{key:"answer",texts:s.getTextTrackList(),query:e.query}}));case"to":return g(s=>{let d=s.getTextTrackList().find(m=>m.trackId===e.trackId);!d||s.setTextTrack(d)})}},y=t=>{let{sub:e}=t;switch(e.key){case"ask":return g(s=>o({key:"changeAudio",sub:{key:"answer",audios:s.getAudioTrackList(),query:e.query}}));case"to":return g(s=>{let d=s.getAudioTrackList().find(m=>m.trackId===e.trackId);!d||s.setAudioTrack(d)})}},w=t=>g(e=>{switch(t.sub.key){case"up":return e.setVolume(Math.min(e.getVolume()+.1,1));case"down":return e.setVolume(Math.max(e.getVolume()-.1,0));case"full":return e.setVolume(1);case"zero":return e.setVolume(0);case"half":return e.setVolume(.5);case"setPercent":return e.setVolume(t.sub.percentage)}}),O=t=>g(e=>{switch(t.sub.key){case"to":return e.seek(t.sub.timestamp);case"ahead":return e.seek(e.getCurrentTime()+t.sub.duration);case"behind":return e.seek(e.getCurrentTime()-t.sub.duration)}}),M=t=>{switch(t.sub.key){case"ask-videos":return o({key:"watch",sub:{key:"answer-matches",query:t.sub.query,videos:[...T(),...S()].map(({videoId:e,title:s})=>({videoId:e,title:s}))}})}},S=()=>z(t=>{let e=t.videos;return e?Object.entries(e).map(([s,d])=>({videoId:s,title:d.title&&d.title.value||"",data:d})).filter(s=>s.title!==""):null})||[],T=()=>Array.from(document.querySelectorAll("a")).map(t=>{if(!t.href)return null;let e=new URL(t.href,window.location.origin);if(e.pathname.startsWith("/watch/")){let s=t.getAttribute("aria-label")||"";return{anchorElement:t,title:s,videoId:e.pathname.slice("/watch/".length)}}return null}).filter(t=>t!==null),W=()=>{let t=Array.from(new Set([...S().map(({videoId:s})=>s),...T().map(({videoId:s})=>s)])),e=t[Math.round(Math.random()*(t.length-1))];!e||i(e)},g=t=>{let e=R();if(e)return t(e)},R=()=>{let t=_();if(!t)return null;let e=E();return e&&t.getVideoPlayerBySessionId(e.sessionId)||null},E=()=>p(t=>{let[e]=t.appContext.getPlayerApp().getAPI().getOpenPlaybackSessions();return!e||e.playbackInitiator!=="USER"?null:e}),_=()=>p(t=>t.appContext.state.playerApp.getAPI().videoPlayer),z=t=>p(e=>t(e.appContext.getState().pathEvaluator.getCache())),p=t=>L(()=>t(window.netflix)),L=t=>{try{return t()}catch(e){return console.error(e),null}};window.addEventListener("message",t=>k(t.data))};return I})();
LS-SPLITallPlugins.Netflix=(()=>{var k="lipsurf-netflix-script",p=PluginBase.util.getNoCollisionUniqueAttr(),x=PluginBase.util.getNoCollisionUniqueAttr(),v=r=>window.postMessage(JSON.stringify({proofKey:p,payload:r})),I=r=>{try{return JSON.parse(r)}catch{return null}},S=(r,s,o)=>{let c=I(r);c&&c.proofKey===s&&o(c.payload)},T=r=>{window.location.href=`https://www.netflix.com/search?q=${encodeURIComponent(r)}`},P=r=>{window.location.href=`https://www.netflix.com/watch/${r}`},d={watch:"Netflix Video Player Controls",browse:"Browse Netflix"},C=(()=>{let r=!0,s=i=>{let{pathname:a}=i;switch(!0){case a.startsWith("/watch"):return d.watch;case a.startsWith("/latest"):case a.startsWith("/browse"):case a.startsWith("/title"):case a.startsWith("/search"):return d.browse;default:return null}},o=i=>{let a=new Set(PluginBase.util.getContext());switch(a.delete(PluginBase.constants.contexts.Normal),a.delete(d.watch),a.delete(d.browse),!0){case i===d.browse:{PluginBase.util.enterContext([d.browse,PluginBase.constants.contexts.Normal,...Array.from(a)]);return}case i===d.watch:{PluginBase.util.enterContext([d.watch,...Array.from(a)]);return}default:{PluginBase.util.removeContext(d.watch),PluginBase.util.removeContext(d.browse),PluginBase.util.appendContext(PluginBase.constants.contexts.Normal);return}}},c=()=>{try{o(s(new URL(window.location.href)))}catch(i){console.error(i)}};return{enable:async()=>{for(r=!0;r;)c(),await new Promise(i=>setTimeout(i,1e3))},disable:()=>{r=!1,PluginBase.util.enterContext([PluginBase.constants.contexts.Normal])}}})(),B={...PluginBase,init:()=>{if(!document.getElementById(k)){let r=document.createElement("script");r.id=k,r.textContent=`(${q.toString()})("${p}","${x}");`,(document.head||document.documentElement).appendChild(r),r.remove()}C.enable()},destroy:()=>C.disable(),commands:{}};(()=>{window.addEventListener("message",s=>r(s.data));let r=s=>S(s,x,o=>{switch(o.key){case"changeText":return O(o);case"changeAudio":return V(o);case"watch":return N(o)}})})();var N=async r=>{let{sub:s}=r;if(s.key!=="answer-matches")return;let o=s.videos,c=o.find(u=>u.title===s.query);if(c)return P(c.videoId);let i=o.filter(u=>!!u.title.trim()),w=(await Promise.all(i.map(u=>PluginBase.util.fuzzyHighScore(s.query,[u.title],0,!0)))).map(([u,g],f)=>({score:g,index:f})).sort(({score:u},{score:g})=>g-u)[0];if(w.score>.8){let u=i[w.index];if(u)return P(u.videoId)}return T(s.query)},O=async r=>{let{sub:s}=r;if(s.key!=="answer")return;let o=s.texts,[c]=await PluginBase.util.fuzzyHighScore(s.query,o.map(a=>a.displayName),void 0,!0),i=o[c];!i||v({key:"changeText",sub:{key:"to",trackId:i.trackId}})},V=async r=>{let{sub:s}=r;if(s.key!=="answer")return;let o=s.audios,[c]=await PluginBase.util.fuzzyHighScore(s.query,o.map(a=>a.displayName),void 0,!0),i=o[c];!i||v({key:"changeAudio",sub:{key:"to",trackId:i.trackId}})},q=(r,s)=>{let o=t=>{try{return JSON.parse(t)}catch{return null}},c=(t,e,n)=>{let l=o(t);l&&l.proofKey===e&&n(l.payload)},i=t=>{window.location.href=`https://www.netflix.com/watch/${t}`},a=t=>window.postMessage(JSON.stringify({proofKey:s,payload:t})),w=t=>{c(t,r,e=>{switch(e.key){case"play":return h(n=>n.play());case"pause":return h(n=>n.pause());case"volume":return f(e);case"skip":return M(e);case"watch":return W(e);case"watchRandom":return E();case"changeText":return u(e);case"changeAudio":return g(e)}})},u=t=>{let{sub:e}=t;switch(e.key){case"ask":return h(n=>a({key:"changeText",sub:{key:"answer",texts:n.getTextTrackList(),query:e.query}}));case"to":return h(n=>{let l=n.getTextTrackList().find(m=>m.trackId===e.trackId);!l||n.setTextTrack(l)})}},g=t=>{let{sub:e}=t;switch(e.key){case"ask":return h(n=>a({key:"changeAudio",sub:{key:"answer",audios:n.getAudioTrackList(),query:e.query}}));case"to":return h(n=>{let l=n.getAudioTrackList().find(m=>m.trackId===e.trackId);!l||n.setAudioTrack(l)})}},f=t=>h(e=>{switch(t.sub.key){case"up":return e.setVolume(Math.min(e.getVolume()+.1,1));case"down":return e.setVolume(Math.max(e.getVolume()-.1,0));case"full":return e.setVolume(1);case"zero":return e.setVolume(0);case"half":return e.setVolume(.5);case"setPercent":return e.setVolume(t.sub.percentage)}}),M=t=>h(e=>{switch(t.sub.key){case"to":return e.seek(t.sub.timestamp);case"ahead":return e.seek(e.getCurrentTime()+t.sub.duration);case"behind":return e.seek(e.getCurrentTime()-t.sub.duration)}}),W=t=>{switch(t.sub.key){case"ask-videos":return a({key:"watch",sub:{key:"answer-matches",query:t.sub.query,videos:[...A(),...b()].map(({videoId:e,title:n})=>({videoId:e,title:n}))}})}},b=()=>z(t=>{let e=t.videos;return e?Object.entries(e).map(([n,l])=>({videoId:n,title:l.title&&l.title.value||"",data:l})).filter(n=>n.title!==""):null})||[],A=()=>Array.from(document.querySelectorAll("a")).map(t=>{if(!t.href)return null;let e=new URL(t.href,window.location.origin);if(e.pathname.startsWith("/watch/")){let n=t.getAttribute("aria-label")||"";return{anchorElement:t,title:n,videoId:e.pathname.slice("/watch/".length)}}return null}).filter(t=>t!==null),E=()=>{let t=Array.from(new Set([...b().map(({videoId:n})=>n),...A().map(({videoId:n})=>n)])),e=t[Math.round(Math.random()*(t.length-1))];!e||i(e)},h=t=>{let e=R();if(e)return t(e)},R=()=>{let t=L();if(!t)return null;let e=_();return e&&t.getVideoPlayerBySessionId(e.sessionId)||null},_=()=>y(t=>{let[e]=t.appContext.getPlayerApp().getAPI().getOpenPlaybackSessions();return!e||e.playbackInitiator!=="USER"?null:e}),L=()=>y(t=>t.appContext.state.playerApp.getAPI().videoPlayer),z=t=>y(e=>t(e.appContext.getState().pathEvaluator.getCache())),y=t=>U(()=>t(window.netflix)),U=t=>{try{return t()}catch(e){return console.error(e),null}};window.addEventListener("message",t=>w(t.data))};return B})();
